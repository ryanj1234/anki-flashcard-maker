from pyforvo import ForvoResults


def test_get_highest_rating():
    results = {'attributes': {'total': 7}, 'items': [{'id': 1651052, 'word': 'идти', 'original': 'идти', 'addtime': '2012-07-05 14:15:10', 'hits': 6425, 'username': 'luba1980', 'sex': 'f', 'country': 'France', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/3b3l3f2l3c362d3k321k3l393j1m3g2i2n352f371l2j372c331p341l2o2j2n242l2i371j2b3b3i38332b2i32252o3q2o2i2e3j312j36392h3o3f2d2a1b231l1i281m223k1m2a393a33283c2e3c3h391i1n3f271n2b2h1t1t_2c37363n382a2n23362b3k382a3i2b3a1n2f38343b3n1t1t', 'pathogg': 'https://apifree.forvo.com/audio/1h28261o3c332b293p1b3h232d3o3d223538322i1i2q2h3i332m3n3f1l3o3338232d32382h1i292a3a36352l1m373m1f383g233o1p3n1j1l1j34312m3j2f34321j3n3i2h2n2l3n293d3j2a3n2k29373i3i2p1i2428211t1t_282f261o39272j3n321k1g35261b2h3k392g3m2g34371t1t', 'rate': 3, 'num_votes': 3, 'num_positive_votes': 3}, {'id': 4123749, 'word': 'идти', 'original': 'идти', 'addtime': '2016-02-04 09:57:47', 'hits': 2145, 'username': 'RePirate', 'sex': 'm', 'country': 'Russia', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/252k3n2j3a1k353q1j3c2b2j3c213l3m2q232h292o2k3m291i3q3i3e292m3i212b253n3l2e331j3o2g212p3527251f2f3e2m3g2g1g391o1o1i1l2g3a2j2j2i3q2i3c3k33223j2133382b1l1p3j2n37293c21362q3c3n1t1t_3p3d28282l3q2g212p3h1g3h1j3q221b36373i2b1i2h1t1t', 'pathogg': 'https://apifree.forvo.com/audio/2n2b3q1n1l2g1f371n3l2c261n2m1l343d382c362i2f1k2f21353l3m1k1j3g273m332f2g3b323g1m33383d2g1l3i3p1j2a2f2i343h372b2n2l2o1h2m213q1o212i3n1b3q2n3q3b323c1i3c1b3h282m2b1m2a242e1m2h1t1t_1n29212q253d2h1j3c343m2i1l273k243o2m2e353d211t1t', 'rate': 0, 'num_votes': 0, 'num_positive_votes': 0}, {'id': 4642389, 'word': 'идти', 'original': 'идти', 'addtime': '2016-11-04 20:03:23', 'hits': 819, 'username': 'iMarina', 'sex': 'f', 'country': 'Ukraine', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/3e26391m1i242c222h1i3j1n3e373q1p3l1k253m352k3p1i2j1k2f1h3d251n2j2d2j242k332b352f2q3h2d32292a2e1i1j3h2h1o3o371l37213o393m2q29282o31272e2h3924312l25323l1p3m3b372f1l2i3o281h3n1t1t_3j2d3q1b263n2b342k1m1h3g3a3b3l1n2p1i3l2b1l211t1t', 'pathogg': 'https://apifree.forvo.com/audio/3i3d232j322a362n373l1k313p2j2n3i32372o372c283m2a3b3f2k2g311m3p2a272g262j3e2p233d2d24353a1l1j3q331i2924221i313g36323e2j2p3j1p2n3632223p371f312j1l1k353l212e352724231n1m1n342h1t1t_3h362a2f3o21322e3h1f2a3g331h3p2e3f2o2p382o2h1t1t', 'rate': 0, 'num_votes': 2, 'num_positive_votes': 1}, {'id': 4643421, 'word': 'идти', 'original': 'идти', 'addtime': '2016-11-05 15:15:58', 'hits': 1615, 'username': 'disappointed', 'sex': 'm', 'country': 'Russia', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/2b3f2c3c2c253522233i351k2p1k2l342p2k372g212g1p3n3d3a231o322m1i341h3d3b3128282a3f2a2h3f251i3o3o2k2b1m28241f2j32293q3e213a2o2p2q222f353g3121233j3h25231g352b1l353q3836353c2o211t1t_1b1n2h3g3e2h2i323e353k2q212a3p3h3c2h1h351i2h1t1t', 'pathogg': 'https://apifree.forvo.com/audio/283e1j1p333j3e2b1j272k1o2j333q1k3q221h3o273739263p2l1l3q1f2c292n23383c2o3o333f393g1p2d1i2k3e2433232q3b392h3g2g32253j2l2f1j2n3q3129382o251m3o3h2g222q381p36341h2f2j1p2q331g211t1t_2f231h1h2o3f2f23241n1h1o2h2i2b291h1l1g3j2j371t1t', 'rate': 1, 'num_votes': 1, 'num_positive_votes': 1}, {'id': 5438465, 'word': 'идти', 'original': 'идти', 'addtime': '2018-01-20 18:48:53', 'hits': 309, 'username': 'TaaKvitka', 'sex': 'f', 'country': 'Ukraine', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/2k212e271o2j3c281n2825222h233d331g2i212f2p252h1l2b3e3e2f3f2k3q3o283a351h29322a3b3g1k3i3p2g3o3q39293e2j2d3j1g312f292e2j3g2o353q3l3h2q2c27291j2l23222q2k2o3q1h31243f3j1l2k3a371t1t_3h2h381p2o3n3q292e3d1j251i331n2o372d1k1n1h211t1t', 'pathogg': 'https://apifree.forvo.com/audio/2o3b3h3f2k1g3m221j2d341g38342j3231231k251j1l1p3m352b3d1p3l2d2d281g1g1k2a1k1l3o1p25362m2q1l2q1m3i1j2h1n391k2j2k1i2m2k363n223k3b3j2d3g1i3h311p2p3p242o3d3c2n3o1n3p3936261j2e2h1t1t_361i3n3g3h2k2g1m2d1p2e1j3j2d2j1k2d1k2b3d3h371t1t', 'rate': 0, 'num_votes': 0, 'num_positive_votes': 0}, {'id': 6158915, 'word': 'идти', 'original': 'идти', 'addtime': '2019-05-20 11:56:04', 'hits': 643, 'username': 'zhivanova', 'sex': 'f', 'country': 'Ukraine', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/2d262q3f3h2a361b2a221l382j2m1i3225322n2k2g2h3o311g362m211h393g2i1k262j1l2c2k372o3o1g2g21241p2g3j1g231i2n2d33292c3i2k223i1o2b3a3d35261m2226342l25371g2i2a1l1h2m283b2o2j3l3h371t1t_1p223l2e2j3e23263p3o261k211p3f2c2g37211n2q2h1t1t', 'pathogg': 'https://apifree.forvo.com/audio/1o212k2j3a3a29293l363h3f1g3m1g221k2g2j2g2m2j1o2j1l3a2e1i1g2g1p342o1j3n371n263l1h212g3822253g3o3c3m3l1l1h2e2n1b3o2c1b1b312k1b2o3n1f222j3m1p2f3k2i272j3h2q3f1h1p2g1n3j3q383a3n1t1t_1n3q362o3932343i2p211k1k2q343c3a1n2j3d352e211t1t', 'rate': 2, 'num_votes': 2, 'num_positive_votes': 2}, {'id': 7597471, 'word': 'идти', 'original': 'идти', 'addtime': '2021-02-03 10:52:51', 'hits': 54, 'username': 'Spinster', 'sex': 'f', 'country': 'Russia', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/3j37242f2i2n2m3d1f2g1o3q2d2a2j1g251o221l3p3q2i2k2g1m3a363c3a3g2g2g3q2g3g25211p263f393n2b1o3c1f391o1n282o3429251j323i2a1m2e353c1h1j2h2k1n362l1b3e3h3d2e243h3i2l2d3o2523232f3n1t1t_1k241b3p3h1g3d2n283m1g3c3d24252k283p1k1k26211t1t', 'pathogg': 'https://apifree.forvo.com/audio/3c2g1j1m1i1h2f1b3p1g281k2o3f342q3p3j1g3m2e1n3c2f1i3d1l283q2n2d351p313b3p2o1n321h2q3j1f391g332l1m29381f24373a2b2c251f2d351b1i1g332a222e393q1b2f3f3b3l29321g263h1h2g2234392p2h1t1t_2i2i22232d2j212b2n2q2m2j1n242i243k2d1l3f2l2h1t1t', 'rate': 0, 'num_votes': 0, 'num_positive_votes': 0}]}

    f = ForvoResults(results, [])

    assert f.num_pron == 7
    assert f.get_highest_rating().username == 'luba1980'


def test_get_preferred_user():
    results = {'attributes': {'total': 7}, 'items': [{'id': 1651052, 'word': 'идти', 'original': 'идти', 'addtime': '2012-07-05 14:15:10', 'hits': 6425, 'username': 'luba1980', 'sex': 'f', 'country': 'France', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/3b3l3f2l3c362d3k321k3l393j1m3g2i2n352f371l2j372c331p341l2o2j2n242l2i371j2b3b3i38332b2i32252o3q2o2i2e3j312j36392h3o3f2d2a1b231l1i281m223k1m2a393a33283c2e3c3h391i1n3f271n2b2h1t1t_2c37363n382a2n23362b3k382a3i2b3a1n2f38343b3n1t1t', 'pathogg': 'https://apifree.forvo.com/audio/1h28261o3c332b293p1b3h232d3o3d223538322i1i2q2h3i332m3n3f1l3o3338232d32382h1i292a3a36352l1m373m1f383g233o1p3n1j1l1j34312m3j2f34321j3n3i2h2n2l3n293d3j2a3n2k29373i3i2p1i2428211t1t_282f261o39272j3n321k1g35261b2h3k392g3m2g34371t1t', 'rate': 3, 'num_votes': 3, 'num_positive_votes': 3}, {'id': 4123749, 'word': 'идти', 'original': 'идти', 'addtime': '2016-02-04 09:57:47', 'hits': 2145, 'username': 'RePirate', 'sex': 'm', 'country': 'Russia', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/252k3n2j3a1k353q1j3c2b2j3c213l3m2q232h292o2k3m291i3q3i3e292m3i212b253n3l2e331j3o2g212p3527251f2f3e2m3g2g1g391o1o1i1l2g3a2j2j2i3q2i3c3k33223j2133382b1l1p3j2n37293c21362q3c3n1t1t_3p3d28282l3q2g212p3h1g3h1j3q221b36373i2b1i2h1t1t', 'pathogg': 'https://apifree.forvo.com/audio/2n2b3q1n1l2g1f371n3l2c261n2m1l343d382c362i2f1k2f21353l3m1k1j3g273m332f2g3b323g1m33383d2g1l3i3p1j2a2f2i343h372b2n2l2o1h2m213q1o212i3n1b3q2n3q3b323c1i3c1b3h282m2b1m2a242e1m2h1t1t_1n29212q253d2h1j3c343m2i1l273k243o2m2e353d211t1t', 'rate': 0, 'num_votes': 0, 'num_positive_votes': 0}, {'id': 4642389, 'word': 'идти', 'original': 'идти', 'addtime': '2016-11-04 20:03:23', 'hits': 819, 'username': 'iMarina', 'sex': 'f', 'country': 'Ukraine', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/3e26391m1i242c222h1i3j1n3e373q1p3l1k253m352k3p1i2j1k2f1h3d251n2j2d2j242k332b352f2q3h2d32292a2e1i1j3h2h1o3o371l37213o393m2q29282o31272e2h3924312l25323l1p3m3b372f1l2i3o281h3n1t1t_3j2d3q1b263n2b342k1m1h3g3a3b3l1n2p1i3l2b1l211t1t', 'pathogg': 'https://apifree.forvo.com/audio/3i3d232j322a362n373l1k313p2j2n3i32372o372c283m2a3b3f2k2g311m3p2a272g262j3e2p233d2d24353a1l1j3q331i2924221i313g36323e2j2p3j1p2n3632223p371f312j1l1k353l212e352724231n1m1n342h1t1t_3h362a2f3o21322e3h1f2a3g331h3p2e3f2o2p382o2h1t1t', 'rate': 0, 'num_votes': 2, 'num_positive_votes': 1}, {'id': 4643421, 'word': 'идти', 'original': 'идти', 'addtime': '2016-11-05 15:15:58', 'hits': 1615, 'username': 'disappointed', 'sex': 'm', 'country': 'Russia', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/2b3f2c3c2c253522233i351k2p1k2l342p2k372g212g1p3n3d3a231o322m1i341h3d3b3128282a3f2a2h3f251i3o3o2k2b1m28241f2j32293q3e213a2o2p2q222f353g3121233j3h25231g352b1l353q3836353c2o211t1t_1b1n2h3g3e2h2i323e353k2q212a3p3h3c2h1h351i2h1t1t', 'pathogg': 'https://apifree.forvo.com/audio/283e1j1p333j3e2b1j272k1o2j333q1k3q221h3o273739263p2l1l3q1f2c292n23383c2o3o333f393g1p2d1i2k3e2433232q3b392h3g2g32253j2l2f1j2n3q3129382o251m3o3h2g222q381p36341h2f2j1p2q331g211t1t_2f231h1h2o3f2f23241n1h1o2h2i2b291h1l1g3j2j371t1t', 'rate': 1, 'num_votes': 1, 'num_positive_votes': 1}, {'id': 5438465, 'word': 'идти', 'original': 'идти', 'addtime': '2018-01-20 18:48:53', 'hits': 309, 'username': 'TaaKvitka', 'sex': 'f', 'country': 'Ukraine', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/2k212e271o2j3c281n2825222h233d331g2i212f2p252h1l2b3e3e2f3f2k3q3o283a351h29322a3b3g1k3i3p2g3o3q39293e2j2d3j1g312f292e2j3g2o353q3l3h2q2c27291j2l23222q2k2o3q1h31243f3j1l2k3a371t1t_3h2h381p2o3n3q292e3d1j251i331n2o372d1k1n1h211t1t', 'pathogg': 'https://apifree.forvo.com/audio/2o3b3h3f2k1g3m221j2d341g38342j3231231k251j1l1p3m352b3d1p3l2d2d281g1g1k2a1k1l3o1p25362m2q1l2q1m3i1j2h1n391k2j2k1i2m2k363n223k3b3j2d3g1i3h311p2p3p242o3d3c2n3o1n3p3936261j2e2h1t1t_361i3n3g3h2k2g1m2d1p2e1j3j2d2j1k2d1k2b3d3h371t1t', 'rate': 0, 'num_votes': 0, 'num_positive_votes': 0}, {'id': 6158915, 'word': 'идти', 'original': 'идти', 'addtime': '2019-05-20 11:56:04', 'hits': 643, 'username': 'zhivanova', 'sex': 'f', 'country': 'Ukraine', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/2d262q3f3h2a361b2a221l382j2m1i3225322n2k2g2h3o311g362m211h393g2i1k262j1l2c2k372o3o1g2g21241p2g3j1g231i2n2d33292c3i2k223i1o2b3a3d35261m2226342l25371g2i2a1l1h2m283b2o2j3l3h371t1t_1p223l2e2j3e23263p3o261k211p3f2c2g37211n2q2h1t1t', 'pathogg': 'https://apifree.forvo.com/audio/1o212k2j3a3a29293l363h3f1g3m1g221k2g2j2g2m2j1o2j1l3a2e1i1g2g1p342o1j3n371n263l1h212g3822253g3o3c3m3l1l1h2e2n1b3o2c1b1b312k1b2o3n1f222j3m1p2f3k2i272j3h2q3f1h1p2g1n3j3q383a3n1t1t_1n3q362o3932343i2p211k1k2q343c3a1n2j3d352e211t1t', 'rate': 2, 'num_votes': 2, 'num_positive_votes': 2}, {'id': 7597471, 'word': 'идти', 'original': 'идти', 'addtime': '2021-02-03 10:52:51', 'hits': 54, 'username': 'Spinster', 'sex': 'f', 'country': 'Russia', 'code': 'ru', 'langname': 'Russian', 'pathmp3': 'https://apifree.forvo.com/audio/3j37242f2i2n2m3d1f2g1o3q2d2a2j1g251o221l3p3q2i2k2g1m3a363c3a3g2g2g3q2g3g25211p263f393n2b1o3c1f391o1n282o3429251j323i2a1m2e353c1h1j2h2k1n362l1b3e3h3d2e243h3i2l2d3o2523232f3n1t1t_1k241b3p3h1g3d2n283m1g3c3d24252k283p1k1k26211t1t', 'pathogg': 'https://apifree.forvo.com/audio/3c2g1j1m1i1h2f1b3p1g281k2o3f342q3p3j1g3m2e1n3c2f1i3d1l283q2n2d351p313b3p2o1n321h2q3j1f391g332l1m29381f24373a2b2c251f2d351b1i1g332a222e393q1b2f3f3b3l29321g263h1h2g2234392p2h1t1t_2i2i22232d2j212b2n2q2m2j1n242i243k2d1l3f2l2h1t1t', 'rate': 0, 'num_votes': 0, 'num_positive_votes': 0}]}

    f = ForvoResults(results, ['Spinster'])

    assert f.num_pron == 7
    assert f.get_preferred().username == 'Spinster'